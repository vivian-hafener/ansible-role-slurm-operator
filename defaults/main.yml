---
# ============ Desired system state ============
# charts
slurm_operator_chart_state: absent
slurm_chart_state: absent
slurm_bridge_chart_state: absent

# chart source
slinky_use_local_charts: false
slinky_chart_dir: "/home/vhafener/charts"
slinky_values_dir: "{{ slinky_chart_dir }}/values"
slinky_charts_version: "0.3.1"
slinky_repo_root: "git@github.com:SlinkyProject"

# images
slinky_build_images: true
slinky_image_src_tag: main
slinky_operator_image_name: "local-slurm-operator"
slinky_image_tag: "v0.4.0"
slinky_containerd_ns: "k8s.io" # TODO This is not idiomatic and should be resolved

# ============ Configuration ============
api_version: "v1"
kubernetes_conf: "/etc/kubernetes/admin.conf"

slinky_helm_chart_dependencies:
  - {name: jetstack, url: "https://charts.jetstack.io", state: present}

# ============ slurm-operator ============
# repo
slurm_operator_repo: "{{ slinky_repo_root }}/slurm-operator.git"
slurm_operator_git_tag: "v{{ slurm_operator_chart_version }}"

# chart spec
slurm_operator_chart_name: slurm-operator
slurm_operator_chart_version: "{{ slinky_charts_version }}"
slurm_operator_chart_ref: "oci://ghcr.io/slinkyproject/charts/slurm-operator"
slurm_operator_chart_namespace: "slinky"
slurm_operator_chart_dependencies:
  - {name: prometheus-community, url: "https://prometheus-community.github.io/helm-charts", state: present}

# chart state
slurm_operator_chart_values: "slurm-operator-values.yaml"

# ============ slurm ============
# chart spec
slurm_chart_name: slurm
slurm_chart_ref: "oci://ghcr.io/slinkyproject/charts/slurm"
slurm_chart_namespace: slurm

# chart state
slurm_chart_values: "slurm-values.yaml"

# ============ slurm-bridge ============
# repo
slurm_bridge_repo: "{{ slinky_repo_root }}/slurm-bridge.git"
slurm_bridge_git_tag: "v{{ slurm_bridge_chart_version }}"

# chart spec
slurm_bridge_chart_name: slurm-bridge
slurm_bridge_chart_version: "{{ slinky_charts_version }}"
slurm_bridge_chart_ref: oci://ghcr.io/slinkyproject/charts/slurm-bridge

# chart state
slurmctld_host: "n1.vhafener.com"
slinky_namespace: slinky
slurm_bridge_chart_values: "slurm-bridge-values.yaml"
